<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>3000 Linkvertise Tasks — Dashboard</title>

<style>
  :root{
    --bg:#f4f6f8;
    --card:#fff;
    --muted:#555;
    --accent:#1976d2;
    --green:#2e7d32;
  }
  body{
    font-family: "Inter", system-ui, sans-serif;
    margin:0;
    background:var(--bg);
    color:#222;
    overflow-y:scroll;
    scroll-behavior:smooth;
  }

  /* ---------- Top Green Header ---------- */
  .top-section{
    background:var(--green);
    color:#fff;
    padding:16px;
    text-align:center;
  }
  .top-section h2{
    margin:0;
    font-size:22px;
  }
  #datetime{
    font-weight:600;
    font-size:16px;
  }
  #taskCounter{
    background:#fff;
    color:var(--green);
    padding:6px 14px;
    border-radius:50px;
    font-weight:700;
    display:inline-block;
    margin-top:10px;
  }
  #progress-container{
    width:90%;
    max-width:500px;
    height:22px;
    background:#d0d7df;
    border-radius:20px;
    margin:10px auto;
    overflow:hidden;
  }
  #progress-bar{
    height:100%;
    width:0%;
    background:linear-gradient(90deg,#1976d2,#42a5f5);
    color:#fff;
    font-size:13px;
    display:flex;
    align-items:center;
    justify-content:center;
    font-weight:700;
    transition:width 0.4s ease;
  }
  .top-buttons{
    margin-top:10px;
    display:flex;
    justify-content:center;
    gap:10px;
    flex-wrap:wrap;
  }
  .top-buttons button,
  .top-buttons a{
    background:#fff;
    color:var(--green);
    border:none;
    padding:8px 14px;
    border-radius:8px;
    font-weight:600;
    cursor:pointer;
    text-decoration:none;
  }

  main{
    max-width:1200px;
    margin:20px auto;
    padding:10px 20px 100px;
  }

  /* ---------- Task grid ---------- */
  #tasks{
    display:grid;
    grid-template-columns:repeat(auto-fill,minmax(320px,1fr));
    gap:10px;
  }
  .task-card{
    background:var(--card);
    border:1px solid #d0d7df;
    padding:10px;
    border-radius:10px;
    display:flex;
    align-items:center;
    justify-content:space-between;
    gap:10px;
    transition:background 0.3s ease, border-color 0.3s ease;
  }
  .task-card.done{
    background:#e7f9ed;
    border-color:#81c784;
  }

  a.tasklink{
    padding:6px 12px;
    background:#fff;
    border:1px solid #cddbe8;
    border-radius:8px;
    color:var(--accent);
    text-decoration:none;
    font-weight:600;
  }
  input.code{
    width:80px;
    padding:5px;
    border:1px solid #ccc;
    border-radius:8px;
  }
  button.verify{
    padding:7px 10px;
    border:none;
    border-radius:8px;
    background:var(--accent);
    color:#fff;
    cursor:pointer;
  }
  .verified-badge{
    background:#2e7d32;
    color:#fff;
    padding:6px 10px;
    border-radius:999px;
    font-weight:700;
    border:1px solid #1b5e20;
  }
  .time-stamp{
    font-size:12px;
    color:#444;
    margin-left:6px;
  }

  @media (max-width:600px){
    .task-card{flex-direction:column;align-items:flex-start;}
  }
</style>
</head>
<body>

<div class="top-section">
  <h2>3000 Linkvertise Tasks Dashboard</h2>
  <div id="datetime"></div>
  <div id="taskCounter">0 / 3000 completed</div>
  <div id="progress-container"><div id="progress-bar">0%</div></div>
  <div class="top-buttons">
    <button id="redeemBtn">Redeem ₹300</button>
    <a href="https://youtube.com/@linkvertise?si=SU07_HOoGAaDikok" target="_blank">How to Complete a Task</a>
  </div>
</div>

<main>
  <div id="tasks"></div>
</main>

<!-- Linkvertise Script -->
<script src="https://publisher.linkvertise.com/cdn/linkvertise.js"></script>
<script>
try{linkvertise(1436408,{whitelist:[],blacklist:[]});}catch(e){}
</script>

<script>
const TOTAL = 3000;
const BATCH = 100;
const KEY_CODES = 'taskCodes';
const KEY_VERIFIED = 'verifiedTasks';
const KEY_TIME = 'verifiedTimes';
const tasksEl = document.getElementById('tasks');
const progressBarEl = document.getElementById('progress-bar');
const counterEl = document.getElementById('taskCounter');

let taskCodes = JSON.parse(localStorage.getItem(KEY_CODES) || '{}');
let verifiedTasks = JSON.parse(localStorage.getItem(KEY_VERIFIED) || '{}');
let verifiedTimes = JSON.parse(localStorage.getItem(KEY_TIME) || '{}');
let verifiedCount = Object.keys(verifiedTasks).length;

/* ---------- DATETIME CLOCK ---------- */
function updateClock(){
  const now = new Date();
  document.getElementById('datetime').textContent =
    now.toLocaleDateString() + " " + now.toLocaleTimeString();
}
setInterval(updateClock, 1000);
updateClock();

/* ---------- UI Updates ---------- */
function updateProgressUI(){
  const pct = Math.round((verifiedCount/TOTAL)*100);
  progressBarEl.style.width = pct+"%";
  progressBarEl.textContent = `${pct}% (${verifiedCount}/${TOTAL})`;
  counterEl.textContent = `${verifiedCount} / ${TOTAL} completed`;
}

/* ---------- Mark Verified ---------- */
function markVerified(id){
  if(verifiedTasks[id]) return;
  verifiedTasks[id] = true;
  verifiedTimes[id] = new Date().toLocaleString();
  localStorage.setItem(KEY_VERIFIED, JSON.stringify(verifiedTasks));
  localStorage.setItem(KEY_TIME, JSON.stringify(verifiedTimes));
  verifiedCount = Object.keys(verifiedTasks).length;

  const card = document.getElementById('task-card-'+id);
  if(card){
    card.classList.add('done');
    const right = card.querySelector('.right');
    right.innerHTML = `<span class="verified-badge">Verified</span> <span class="time-stamp">${verifiedTimes[id]}</span>`;
  }
  updateProgressUI();
}

/* ---------- Build Tasks (Lazy Loading) ---------- */
let loaded = 0;
function loadMoreTasks(){
  const end = Math.min(loaded + BATCH, TOTAL);
  for(let i=loaded+1;i<=end;i++){
    const card = document.createElement('div');
    card.className='task-card';
    card.id='task-card-'+i;

    const left=document.createElement('div');
    const a=document.createElement('a');
    a.className='tasklink';
    a.href=`verify.html?id=${i}`;
    a.target='_blank';
    a.textContent=`Task ${i}`;
    left.appendChild(a);

    const input=document.createElement('input');
    input.className='code';
    input.id='input-'+i;
    input.placeholder='Code';
    left.appendChild(input);

    const right=document.createElement('div');
    right.className='right';

    if(verifiedTasks[i]){
      card.classList.add('done');
      input.value=taskCodes[i]||'';
      input.disabled=true;
      right.innerHTML=`<span class="verified-badge">Verified</span> <span class="time-stamp">${verifiedTimes[i]||''}</span>`;
    } else {
      const btn=document.createElement('button');
      btn.className='verify';
      btn.textContent='Verify';
      btn.addEventListener('click',()=>{
        const entered=(input.value||'').trim();
        if(taskCodes[i] && entered===taskCodes[i]){
          markVerified(i);
        } else {
          btn.textContent='Invalid';
          setTimeout(()=>btn.textContent='Verify',800);
        }
      });
      right.appendChild(btn);
    }

    card.appendChild(left);
    card.appendChild(right);
    tasksEl.appendChild(card);
  }
  loaded = end;
}

/* Lazy loading scroll */
window.addEventListener('scroll',()=>{
  if(window.innerHeight + window.scrollY >= document.body.offsetHeight - 200){
    if(loaded < TOTAL) loadMoreTasks();
  }
});

loadMoreTasks();

/* ---------- Redeem Button ---------- */
document.getElementById('redeemBtn').addEventListener('click',()=>{
  if(verifiedCount < TOTAL){
    alert("You can redeem only after completing all tasks.");
  } else {
    alert('Message "link vertise" to this number: 7075726388');
  }
});

updateProgressUI();
</script>
</body>
</html>
